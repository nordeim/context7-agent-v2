$ python3 -m src.cli
INFO:src.agent:Agent initialized successfully
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Welcome to Context7 Agent! (Theme: cyberpunk)

/help            Show this help screen
/theme THEME     Switch theme (cyberpunk, ocean, forest, sunset)
/preview N       Preview document N (from results)
/bookmark N      Bookmark document N
/analytics       Show search analytics
/history         Show chat history
/exit            Exit the agent

âœ… Node.js v22.16.0 found
Starting Context7 MCP server...
âœ… Context7 MCP server connected successfully
You: n8n json format
    *
Context7 Documentation MCP Server running on stdio
INFO:httpx:HTTP Request: POST https://api.moonshot.ai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.moonshot.ai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.moonshot.ai/v1/chat/completions "HTTP/1.1 200 OK"
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Agent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ Based on the n8n documentation, here's a comprehensive overview of JSON format usage in n8n:                                                                                                                                             â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ## Standard JSON Data Structure in n8n                                                                                                                                                                                                   â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ n8n uses a specific JSON format for data passed between nodes:                                                                                                                                                                           â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ```json                                                                                                                                                                                                                                  â”‚
â”‚ [                                                                                                                                                                                                                                        â”‚
â”‚   {                                                                                                                                                                                                                                      â”‚
â”‚     "json": {                                                                                                                                                                                                                            â”‚
â”‚       "key1": "value1",                                                                                                                                                                                                                  â”‚
â”‚       "key2": {                                                                                                                                                                                                                          â”‚
â”‚         "nested": "data"                                                                                                                                                                                                                 â”‚
â”‚       }                                                                                                                                                                                                                                  â”‚
â”‚     },                                                                                                                                                                                                                                   â”‚
â”‚     "binary": {                                                                                                                                                                                                                          â”‚
â”‚       "attachment-name": {                                                                                                                                                                                                               â”‚
â”‚         "data": "base64-encoded-data",                                                                                                                                                                                                   â”‚
â”‚         "mimeType": "image/png",                                                                                                                                                                                                         â”‚
â”‚         "fileExtension": "png",                                                                                                                                                                                                          â”‚
â”‚         "fileName": "example.png"                                                                                                                                                                                                        â”‚
â”‚       }                                                                                                                                                                                                                                  â”‚
â”‚     }                                                                                                                                                                                                                                    â”‚
â”‚   }                                                                                                                                                                                                                                      â”‚
â”‚ ]                                                                                                                                                                                                                                        â”‚
â”‚ ```                                                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ## Key JSON Format Requirements                                                                                                                                                                                                          â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ### 1. **Standard Data Format**                                                                                                                                                                                                          â”‚
â”‚ - All data must be wrapped in an array of objects                                                                                                                                                                                        â”‚
â”‚ - Each object must have a `json` property containing the actual data                                                                                                                                                                     â”‚
â”‚ - Binary data goes in an optional `binary` property                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ### 2. **HTTP Request Node JSON Format**                                                                                                                                                                                                 â”‚
â”‚ When using expressions in HTTP Request nodes, wrap JSON in double curly brackets:                                                                                                                                                        â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ```json                                                                                                                                                                                                                                  â”‚
â”‚ {{                                                                                                                                                                                                                                       â”‚
â”‚   {                                                                                                                                                                                                                                      â”‚
â”‚     "myjson": {                                                                                                                                                                                                                          â”‚
â”‚       "name1": "value1",                                                                                                                                                                                                                 â”‚
â”‚       "name2": "value2",                                                                                                                                                                                                                 â”‚
â”‚       "array1": ["value1", "value2"]                                                                                                                                                                                                     â”‚
â”‚     }                                                                                                                                                                                                                                    â”‚
â”‚   }                                                                                                                                                                                                                                      â”‚
â”‚ }}                                                                                                                                                                                                                                       â”‚
â”‚ ```                                                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ### 3. **Webhook Data Structure**                                                                                                                                                                                                        â”‚
â”‚ Incoming webhook data follows this format:                                                                                                                                                                                               â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ```json                                                                                                                                                                                                                                  â”‚
â”‚ [                                                                                                                                                                                                                                        â”‚
â”‚   {                                                                                                                                                                                                                                      â”‚
â”‚     "headers": {},                                                                                                                                                                                                                       â”‚
â”‚     "params": {},                                                                                                                                                                                                                        â”‚
â”‚     "query": {},                                                                                                                                                                                                                         â”‚
â”‚     "body": {                                                                                                                                                                                                                            â”‚
â”‚       "name": "Jim",                                                                                                                                                                                                                     â”‚
â”‚       "age": 30,                                                                                                                                                                                                                         â”‚
â”‚       "city": "New York"                                                                                                                                                                                                                 â”‚
â”‚     }                                                                                                                                                                                                                                    â”‚
â”‚   }                                                                                                                                                                                                                                      â”‚
â”‚ ]                                                                                                                                                                                                                                        â”‚
â”‚ ```                                                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ## JSON Processing Examples                                                                                                                                                                                                              â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ### **Transforming Data**                                                                                                                                                                                                                â”‚
â”‚ ```json                                                                                                                                                                                                                                  â”‚
â”‚ {                                                                                                                                                                                                                                        â”‚
â”‚   "newKey": "new value",                                                                                                                                                                                                                 â”‚
â”‚   "array": [{{ $json.id }}, "{{ $json.name }}"],                                                                                                                                                                                         â”‚
â”‚   "object": {                                                                                                                                                                                                                            â”‚
â”‚     "innerKey1": "new value",                                                                                                                                                                                                            â”‚
â”‚     "innerKey2": "{{ $json.id }}",                                                                                                                                                                                                       â”‚
â”‚     "innerKey3": "{{ $json.name }}"                                                                                                                                                                                                      â”‚
â”‚   }                                                                                                                                                                                                                                      â”‚
â”‚ }                                                                                                                                                                                                                                        â”‚
â”‚ ```                                                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ### **Configuration Files**                                                                                                                                                                                                              â”‚
â”‚ n8n configuration files use JSON format:                                                                                                                                                                                                 â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ```json                                                                                                                                                                                                                                  â”‚
â”‚ {                                                                                                                                                                                                                                        â”‚
â”‚   "executions": {                                                                                                                                                                                                                        â”‚
â”‚     "saveDataOnSuccess": "none"                                                                                                                                                                                                          â”‚
â”‚   },                                                                                                                                                                                                                                     â”‚
â”‚   "generic": {                                                                                                                                                                                                                           â”‚
â”‚     "timezone": "Europe/Berlin"                                                                                                                                                                                                          â”‚
â”‚   },                                                                                                                                                                                                                                     â”‚
â”‚   "nodes": {                                                                                                                                                                                                                             â”‚
â”‚     "exclude": "[\"n8n-nodes-base.executeCommand\"]"                                                                                                                                                                                     â”‚
â”‚   }                                                                                                                                                                                                                                      â”‚
â”‚ }                                                                                                                                                                                                                                        â”‚
â”‚ ```                                                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ### **Workflow Definitions**                                                                                                                                                                                                             â”‚
â”‚ Complete workflows are defined in JSON:                                                                                                                                                                                                  â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ```json                                                                                                                                                                                                                                  â”‚
â”‚ {                                                                                                                                                                                                                                        â”‚
â”‚   "name": "My Workflow",                                                                                                                                                                                                                 â”‚
â”‚   "nodes": [...],                                                                                                                                                                                                                        â”‚
â”‚   "connections": {...},                                                                                                                                                                                                                  â”‚
â”‚   "active": false,                                                                                                                                                                                                                       â”‚
â”‚   "settings": {},                                                                                                                                                                                                                        â”‚
â”‚   "tags": []                                                                                                                                                                                                                             â”‚
â”‚ }                                                                                                                                                                                                                                        â”‚
â”‚ ```                                                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ## Common JSON Operations                                                                                                                                                                                                                â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ### **Accessing JSON Data**                                                                                                                                                                                                              â”‚
â”‚ - Dot notation: `{{$json.body.city}}`                                                                                                                                                                                                    â”‚
â”‚ - Bracket notation: `{{$json['body']['city']}}`                                                                                                                                                                                          â”‚
â”‚ - JMESPath queries: `{{$jmespath($json.body.people, "[*].first")}}`                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ### **Form Field Configuration**                                                                                                                                                                                                         â”‚
â”‚ JSON for defining form fields:                                                                                                                                                                                                           â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ```json                                                                                                                                                                                                                                  â”‚
â”‚ [                                                                                                                                                                                                                                        â”‚
â”‚   {                                                                                                                                                                                                                                      â”‚
â”‚     "fieldLabel": "Email",                                                                                                                                                                                                               â”‚
â”‚     "fieldType": "email",                                                                                                                                                                                                                â”‚
â”‚     "placeholder": "me@mail.com"                                                                                                                                                                                                         â”‚
â”‚   },                                                                                                                                                                                                                                     â”‚
â”‚   {                                                                                                                                                                                                                                      â”‚
â”‚     "fieldLabel": "Number",                                                                                                                                                                                                              â”‚
â”‚     "fieldType": "number"                                                                                                                                                                                                                â”‚
â”‚   }                                                                                                                                                                                                                                      â”‚
â”‚ ]                                                                                                                                                                                                                                        â”‚
â”‚ ```                                                                                                                                                                                                                                      â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ### **File Processing**                                                                                                                                                                                                                  â”‚
â”‚ Converting between JSON and files:                                                                                                                                                                                                       â”‚
â”‚ - JSON to file: Use "Convert to File" node                                                                                                                                                                                               â”‚
â”‚ - File to JSON: Use "Extract From File" node                                                                                                                                                                                             â”‚
â”‚ - Binary data handling: Always include proper mimeType and fileExtension                                                                                                                                                                 â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ ## Best Practices                                                                                                                                                                                                                        â”‚
â”‚                                                                                                                                                                                                                                          â”‚
â”‚ 1. **Always validate JSON syntax** before using in workflows                                                                                                                                                                             â”‚
â”‚ 2. **Use proper data structure** - wrap data in `{ json: {...} }` format                                                                                                                                                                 â”‚
â”‚ 3. **Handle binary data correctly** with appropriate metadata                                                                                                                                                                            â”‚
â”‚ 4. **Use expressions properly** with double curly brackets for JSON in HTTP nodes                                                                                                                                                        â”‚
â”‚ 5. **Test JSON transformations** with sample data before production use                                                                                                                                                                  â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
INFO:src.agent:History saved successfully
You: /exit
Goodbye!
ðŸ”„ Shutting down gracefully...

