$ python3 -m src.cli
INFO:src.agent:Agent initialized successfully
─────────────────────────────────────────────────────────────
Welcome to Context7 Agent! (Theme: cyberpunk)

/help            Show this help screen
/theme THEME     Switch theme (cyberpunk, ocean, forest, sunset)
/preview N       Preview document N (from results)
/bookmark N      Bookmark document N
/analytics       Show search analytics
/history         Show chat history
/exit            Exit the agent

✅ Node.js v22.16.0 found
Starting Context7 MCP server...
✅ Context7 MCP server connected successfully
You: n8n json format
    *
Context7 Documentation MCP Server running on stdio
INFO:httpx:HTTP Request: POST https://api.moonshot.ai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.moonshot.ai/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.moonshot.ai/v1/chat/completions "HTTP/1.1 200 OK"
╭─────────────────────────────── Agent ──────────────────────────
│ Based on the n8n documentation, here's a comprehensive overview of JSON format usage in n8n:                                                                                                                                             │
│                                                                                                                                                                                                                                          │
│ ## Standard JSON Data Structure in n8n                                                                                                                                                                                                   │
│                                                                                                                                                                                                                                          │
│ n8n uses a specific JSON format for data passed between nodes:                                                                                                                                                                           │
│                                                                                                                                                                                                                                          │
│ ```json                                                                                                                                                                                                                                  │
│ [                                                                                                                                                                                                                                        │
│   {                                                                                                                                                                                                                                      │
│     "json": {                                                                                                                                                                                                                            │
│       "key1": "value1",                                                                                                                                                                                                                  │
│       "key2": {                                                                                                                                                                                                                          │
│         "nested": "data"                                                                                                                                                                                                                 │
│       }                                                                                                                                                                                                                                  │
│     },                                                                                                                                                                                                                                   │
│     "binary": {                                                                                                                                                                                                                          │
│       "attachment-name": {                                                                                                                                                                                                               │
│         "data": "base64-encoded-data",                                                                                                                                                                                                   │
│         "mimeType": "image/png",                                                                                                                                                                                                         │
│         "fileExtension": "png",                                                                                                                                                                                                          │
│         "fileName": "example.png"                                                                                                                                                                                                        │
│       }                                                                                                                                                                                                                                  │
│     }                                                                                                                                                                                                                                    │
│   }                                                                                                                                                                                                                                      │
│ ]                                                                                                                                                                                                                                        │
│ ```                                                                                                                                                                                                                                      │
│                                                                                                                                                                                                                                          │
│ ## Key JSON Format Requirements                                                                                                                                                                                                          │
│                                                                                                                                                                                                                                          │
│ ### 1. **Standard Data Format**                                                                                                                                                                                                          │
│ - All data must be wrapped in an array of objects                                                                                                                                                                                        │
│ - Each object must have a `json` property containing the actual data                                                                                                                                                                     │
│ - Binary data goes in an optional `binary` property                                                                                                                                                                                      │
│                                                                                                                                                                                                                                          │
│ ### 2. **HTTP Request Node JSON Format**                                                                                                                                                                                                 │
│ When using expressions in HTTP Request nodes, wrap JSON in double curly brackets:                                                                                                                                                        │
│                                                                                                                                                                                                                                          │
│ ```json                                                                                                                                                                                                                                  │
│ {{                                                                                                                                                                                                                                       │
│   {                                                                                                                                                                                                                                      │
│     "myjson": {                                                                                                                                                                                                                          │
│       "name1": "value1",                                                                                                                                                                                                                 │
│       "name2": "value2",                                                                                                                                                                                                                 │
│       "array1": ["value1", "value2"]                                                                                                                                                                                                     │
│     }                                                                                                                                                                                                                                    │
│   }                                                                                                                                                                                                                                      │
│ }}                                                                                                                                                                                                                                       │
│ ```                                                                                                                                                                                                                                      │
│                                                                                                                                                                                                                                          │
│ ### 3. **Webhook Data Structure**                                                                                                                                                                                                        │
│ Incoming webhook data follows this format:                                                                                                                                                                                               │
│                                                                                                                                                                                                                                          │
│ ```json                                                                                                                                                                                                                                  │
│ [                                                                                                                                                                                                                                        │
│   {                                                                                                                                                                                                                                      │
│     "headers": {},                                                                                                                                                                                                                       │
│     "params": {},                                                                                                                                                                                                                        │
│     "query": {},                                                                                                                                                                                                                         │
│     "body": {                                                                                                                                                                                                                            │
│       "name": "Jim",                                                                                                                                                                                                                     │
│       "age": 30,                                                                                                                                                                                                                         │
│       "city": "New York"                                                                                                                                                                                                                 │
│     }                                                                                                                                                                                                                                    │
│   }                                                                                                                                                                                                                                      │
│ ]                                                                                                                                                                                                                                        │
│ ```                                                                                                                                                                                                                                      │
│                                                                                                                                                                                                                                          │
│ ## JSON Processing Examples                                                                                                                                                                                                              │
│                                                                                                                                                                                                                                          │
│ ### **Transforming Data**                                                                                                                                                                                                                │
│ ```json                                                                                                                                                                                                                                  │
│ {                                                                                                                                                                                                                                        │
│   "newKey": "new value",                                                                                                                                                                                                                 │
│   "array": [{{ $json.id }}, "{{ $json.name }}"],                                                                                                                                                                                         │
│   "object": {                                                                                                                                                                                                                            │
│     "innerKey1": "new value",                                                                                                                                                                                                            │
│     "innerKey2": "{{ $json.id }}",                                                                                                                                                                                                       │
│     "innerKey3": "{{ $json.name }}"                                                                                                                                                                                                      │
│   }                                                                                                                                                                                                                                      │
│ }                                                                                                                                                                                                                                        │
│ ```                                                                                                                                                                                                                                      │
│                                                                                                                                                                                                                                          │
│ ### **Configuration Files**                                                                                                                                                                                                              │
│ n8n configuration files use JSON format:                                                                                                                                                                                                 │
│                                                                                                                                                                                                                                          │
│ ```json                                                                                                                                                                                                                                  │
│ {                                                                                                                                                                                                                                        │
│   "executions": {                                                                                                                                                                                                                        │
│     "saveDataOnSuccess": "none"                                                                                                                                                                                                          │
│   },                                                                                                                                                                                                                                     │
│   "generic": {                                                                                                                                                                                                                           │
│     "timezone": "Europe/Berlin"                                                                                                                                                                                                          │
│   },                                                                                                                                                                                                                                     │
│   "nodes": {                                                                                                                                                                                                                             │
│     "exclude": "[\"n8n-nodes-base.executeCommand\"]"                                                                                                                                                                                     │
│   }                                                                                                                                                                                                                                      │
│ }                                                                                                                                                                                                                                        │
│ ```                                                                                                                                                                                                                                      │
│                                                                                                                                                                                                                                          │
│ ### **Workflow Definitions**                                                                                                                                                                                                             │
│ Complete workflows are defined in JSON:                                                                                                                                                                                                  │
│                                                                                                                                                                                                                                          │
│ ```json                                                                                                                                                                                                                                  │
│ {                                                                                                                                                                                                                                        │
│   "name": "My Workflow",                                                                                                                                                                                                                 │
│   "nodes": [...],                                                                                                                                                                                                                        │
│   "connections": {...},                                                                                                                                                                                                                  │
│   "active": false,                                                                                                                                                                                                                       │
│   "settings": {},                                                                                                                                                                                                                        │
│   "tags": []                                                                                                                                                                                                                             │
│ }                                                                                                                                                                                                                                        │
│ ```                                                                                                                                                                                                                                      │
│                                                                                                                                                                                                                                          │
│ ## Common JSON Operations                                                                                                                                                                                                                │
│                                                                                                                                                                                                                                          │
│ ### **Accessing JSON Data**                                                                                                                                                                                                              │
│ - Dot notation: `{{$json.body.city}}`                                                                                                                                                                                                    │
│ - Bracket notation: `{{$json['body']['city']}}`                                                                                                                                                                                          │
│ - JMESPath queries: `{{$jmespath($json.body.people, "[*].first")}}`                                                                                                                                                                      │
│                                                                                                                                                                                                                                          │
│ ### **Form Field Configuration**                                                                                                                                                                                                         │
│ JSON for defining form fields:                                                                                                                                                                                                           │
│                                                                                                                                                                                                                                          │
│ ```json                                                                                                                                                                                                                                  │
│ [                                                                                                                                                                                                                                        │
│   {                                                                                                                                                                                                                                      │
│     "fieldLabel": "Email",                                                                                                                                                                                                               │
│     "fieldType": "email",                                                                                                                                                                                                                │
│     "placeholder": "me@mail.com"                                                                                                                                                                                                         │
│   },                                                                                                                                                                                                                                     │
│   {                                                                                                                                                                                                                                      │
│     "fieldLabel": "Number",                                                                                                                                                                                                              │
│     "fieldType": "number"                                                                                                                                                                                                                │
│   }                                                                                                                                                                                                                                      │
│ ]                                                                                                                                                                                                                                        │
│ ```                                                                                                                                                                                                                                      │
│                                                                                                                                                                                                                                          │
│ ### **File Processing**                                                                                                                                                                                                                  │
│ Converting between JSON and files:                                                                                                                                                                                                       │
│ - JSON to file: Use "Convert to File" node                                                                                                                                                                                               │
│ - File to JSON: Use "Extract From File" node                                                                                                                                                                                             │
│ - Binary data handling: Always include proper mimeType and fileExtension                                                                                                                                                                 │
│                                                                                                                                                                                                                                          │
│ ## Best Practices                                                                                                                                                                                                                        │
│                                                                                                                                                                                                                                          │
│ 1. **Always validate JSON syntax** before using in workflows                                                                                                                                                                             │
│ 2. **Use proper data structure** - wrap data in `{ json: {...} }` format                                                                                                                                                                 │
│ 3. **Handle binary data correctly** with appropriate metadata                                                                                                                                                                            │
│ 4. **Use expressions properly** with double curly brackets for JSON in HTTP nodes                                                                                                                                                        │
│ 5. **Test JSON transformations** with sample data before production use                                                                                                                                                                  │
╰───────────────────────────────────────────────────────────────
INFO:src.agent:History saved successfully
You: /exit
Goodbye!
🔄 Shutting down gracefully...

